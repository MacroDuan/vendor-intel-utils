From 6d6cb8f285948a61a2d3c8222870cd542e3ac69b Mon Sep 17 00:00:00 2001
From: nma1x <ningx.ma@intel.com>
Date: Tue, 13 Feb 2018 16:20:43 +0800
Subject: [PATCH] [evmm] diable VTD

diable VTD

Change-Id: Iac4a68d1f4ca8f220e13eb9a7fdb5de1fd440e61
---
 product/celadon_64.cfg   |  2 --
 product/celadon_apl.cfg  |  2 --
 product/celadon_kbl.cfg  |  2 --
 product/linux_trusty.cfg | 11 +++--------
 4 files changed, 3 insertions(+), 14 deletions(-)

diff --git a/product/celadon_64.cfg b/product/celadon_64.cfg
index a4a2ee9..f72bc42 100644
--- a/product/celadon_64.cfg
+++ b/product/celadon_64.cfg
@@ -17,8 +17,6 @@ EVMM_CMPL_FLAGS += \
  -DMODULE_VMEXIT_INIT\
  -DPACK_LK \
  -DMODULE_ACPI \
- -DMODULE_VTD \
- -DDMAR_MAX_ENGINE=4 \
  -DSKIP_DMAR_GPU
 
 EVMM_CMPL_FLAGS += \
diff --git a/product/celadon_apl.cfg b/product/celadon_apl.cfg
index a4a2ee9..f72bc42 100644
--- a/product/celadon_apl.cfg
+++ b/product/celadon_apl.cfg
@@ -17,8 +17,6 @@ EVMM_CMPL_FLAGS += \
  -DMODULE_VMEXIT_INIT\
  -DPACK_LK \
  -DMODULE_ACPI \
- -DMODULE_VTD \
- -DDMAR_MAX_ENGINE=4 \
  -DSKIP_DMAR_GPU
 
 EVMM_CMPL_FLAGS += \
diff --git a/product/celadon_kbl.cfg b/product/celadon_kbl.cfg
index 97e8326..42dd039 100644
--- a/product/celadon_kbl.cfg
+++ b/product/celadon_kbl.cfg
@@ -17,8 +17,6 @@ EVMM_CMPL_FLAGS += \
  -DMODULE_VMEXIT_INIT\
  -DPACK_LK \
  -DMODULE_ACPI \
- -DMODULE_VTD \
- -DDMAR_MAX_ENGINE=4
 
 EVMM_CMPL_FLAGS += \
  -DAP_START_IN_HLT
diff --git a/product/linux_trusty.cfg b/product/linux_trusty.cfg
index aff74c9..7bbf912 100644
--- a/product/linux_trusty.cfg
+++ b/product/linux_trusty.cfg
@@ -20,12 +20,7 @@ EVMM_CMPL_FLAGS += \
 
 #VTD feature
 EVMM_CMPL_FLAGS += \
- -DMODULE_SECURITY_TEST \
- -DMODULE_MSR_MONITOR \
- -DMODULE_VTD \
- -DDMAR_MAX_ENGINE=4 \
- -DMULTI_GUEST_DMA \
- -DSKIP_DMAR_GPU
+ -DMODULE_SECURITY_TEST
 
 #osloader will be loaded by ABL to the +6M memory after evmm_pkg.bin
 EVMM_CMPL_FLAGS += \
@@ -33,8 +28,8 @@ EVMM_CMPL_FLAGS += \
  -DPACK_LK
 
 #CSE device id: PCI(BDF(0:15:0))=0x78
-EVMM_CMPL_FLAGS += \
- -DDMA_FROM_CSE=0x78
+#EVMM_CMPL_FLAGS += \
+# -DDMA_FROM_CSE=0x78
 
 #Enable crypto feature and derive key using kdf on bxt
 EVMM_CMPL_FLAGS += \
-- 
2.17.1

